{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nexport default function AuthUser() {\n  _s();\n\n  const navigate = useNavigate();\n\n  const getToken = () => {\n    const tokenString = sessionStorage.getItem('token');\n    const userToken = JSON.parse(tokenString);\n    return userToken;\n  };\n\n  const getUser = () => {\n    const userString = sessionStorage.getItem('user');\n    const user_detail = JSON.parse(userString);\n    return user_detail;\n  };\n\n  const [token, setToken] = useState(getToken());\n  const [user, setUser] = useState(getUser());\n  const [users, setUsers] = useState([]);\n  const [wpisy, setPosts] = useState([]);\n\n  const saveToken = (user, token) => {\n    sessionStorage.setItem('token', JSON.stringify(token));\n    sessionStorage.setItem('user', JSON.stringify(user));\n    setToken(token);\n    setUser(user);\n    navigate('/dashboard');\n  };\n\n  const logout = () => {\n    sessionStorage.clear();\n    navigate('/login');\n  };\n\n  const http = axios.create({\n    baseURL: \"http://localhost:8000/api\",\n    headers: {\n      \"Content-type\": \"application/json\",\n      \"Authorization\": `Bearer ${token}`\n    }\n  });\n\n  const fetchUsers = async wpisy => {\n    try {\n      const response = await http.get('/users');\n      setUsers(response.data);\n      setPosts(wpisy);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const fetchPosts = async id => {\n    try {\n      const response = await http.get(`/wpisy/${id}`);\n      return response.data;\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return {\n    setToken: saveToken,\n    token,\n    user,\n    getToken,\n    http,\n    logout,\n    users,\n    wpisy,\n    fetchUsers,\n    fetchPosts\n  };\n}\n\n_s(AuthUser, \"ipSsU2tjstug5HUECEInVRalyuA=\", false, function () {\n  return [useNavigate];\n});\n\n_c = AuthUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthUser\");","map":{"version":3,"sources":["G:/Studia/SzkieletyProjekt/laravelprojekt/reactjs/src/components/AuthUser.js"],"names":["axios","useState","useNavigate","AuthUser","navigate","getToken","tokenString","sessionStorage","getItem","userToken","JSON","parse","getUser","userString","user_detail","token","setToken","user","setUser","users","setUsers","wpisy","setPosts","saveToken","setItem","stringify","logout","clear","http","create","baseURL","headers","fetchUsers","response","get","data","error","console","fetchPosts","id"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function AuthUser(){\n    const navigate = useNavigate();\n    \n\n    const getToken = () =>{\n        const tokenString = sessionStorage.getItem('token');\n        const userToken = JSON.parse(tokenString);\n        return userToken;\n    }\n\n    const getUser = () =>{\n        const userString = sessionStorage.getItem('user');\n        const user_detail = JSON.parse(userString);\n        return user_detail;\n    }\n\n    const [token,setToken] = useState(getToken());\n    const [user,setUser] = useState(getUser());\n    const [users, setUsers] = useState([]);\n    const [wpisy, setPosts] = useState([]);\n\n    const saveToken = (user,token) =>{\n        sessionStorage.setItem('token',JSON.stringify(token));\n        sessionStorage.setItem('user',JSON.stringify(user));\n\n        setToken(token);\n        setUser(user);\n        navigate('/dashboard');\n    }\n\n    const logout = () => {\n        sessionStorage.clear();\n        navigate('/login');\n    }\n\n    const http = axios.create({\n        baseURL:\"http://localhost:8000/api\",\n        headers:{\n            \"Content-type\" : \"application/json\",\n            \"Authorization\" : `Bearer ${token}`\n        }\n    });\n\n    const fetchUsers = async (wpisy) => {\n        try {\n          const response = await http.get('/users');\n          setUsers(response.data);\n          setPosts(wpisy);\n        } catch (error) {\n          console.error(error);\n        }\n      };\n\n      const fetchPosts = async (id) => {\n        try {\n          const response = await http.get(`/wpisy/${id}`);\n          return response.data;\n        } catch (error) {\n          console.error(error);\n        }\n      };\n\n    return {\n        setToken:saveToken,\n        token,\n        user,\n        getToken,\n        http,\n        logout,\n        users,\n        wpisy,\n        fetchUsers,\n        fetchPosts,\n        \n    }\n}"]},"metadata":{},"sourceType":"module"}